(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{367:function(t,v,_){"use strict";_.r(v);var e=_(42),r=Object(e.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"https"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[t._v("#")]),t._v(" Https")]),t._v(" "),_("h2",{attrs:{id:"https的工作原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#https的工作原理"}},[t._v("#")]),t._v(" https的工作原理")]),t._v(" "),_("p",[t._v("HTTPS 协议的主要功能基本都依赖于 TLS/SSL 协议，TLS/SSL 的功能实现主要依赖于三类基本算法：==散列函数 、对称加密和非对称加密==，其利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。==HTTPS在传输过程中，对内容使用对称加密，而密钥使用非对称加密。==")]),t._v(" "),_("h3",{attrs:{id:"https的工作流程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#https的工作流程"}},[t._v("#")]),t._v(" https的工作流程")]),t._v(" "),_("ol",[_("li",[t._v("Client发起一个HTTPS（比如https://juejin.im/user/4283353031252967）的请求，根据RFC2818的规定，Client知道需要连接Server的443（默认）端口。")]),t._v(" "),_("li",[t._v("==Server==把事先配置好的==公钥证书==（public key certificate）返回给客户端。")]),t._v(" "),_("li",[t._v("Client验证公钥证书：比如是否在有效期内，证书的用途是不是匹配Client请求的站点，是不是在CRL吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的Root证书或者Client内置的Root证书）。如果验证通过则继续，不通过则显示警告信息。")]),t._v(" "),_("li",[t._v("Client使用伪随机数生成器==生成加密所使用的对称密钥==，然后==用证书的公钥加密这个对称密钥==，发给Server。")]),t._v(" "),_("li",[t._v("Server使用自己的==私钥（private key）解密==这个消息，得到对称密钥。至此，Client和Server==双方都持有了相同的对称密钥==。")]),t._v(" "),_("li",[t._v("Server==使用对称密钥加密==“明文内容A”，发送给Client。")]),t._v(" "),_("li",[t._v("Client==使用对称密钥解密==响应的密文，得到“明文内容A”。")]),t._v(" "),_("li",[t._v("Client再次发起HTTPS的请求，使用对称密钥加密请求的“明文内容B”，然后Server使用对称密钥解密密文，得到“明文内容B”。（重复6、7步骤）")])]),t._v(" "),_("p",[t._v("补充：")]),t._v(" "),_("ul",[_("li",[t._v("客户端向服务端发起HTTPS请求")]),t._v(" "),_("li",[t._v("服务端返回HTTPS证书")]),t._v(" "),_("li",[t._v("客户端验证证书是否合法，不合法会提示告警")]),t._v(" "),_("li",[t._v("证书验证合法后，在本地生成随机数")]),t._v(" "),_("li",[t._v("用公钥加密随机数并发送到服务端")]),t._v(" "),_("li",[t._v("服务端使用私钥对随机数解密")]),t._v(" "),_("li",[t._v("服务端使用随机数构造对称加密算法，对内容加密后传输")]),t._v(" "),_("li",[t._v("客户端收到加密内容，使用本地存储的随机数构建对称加密算法进行解密")])]),t._v(" "),_("h2",{attrs:{id:"https和http有什么区别"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#https和http有什么区别"}},[t._v("#")]),t._v(" https和http有什么区别")]),t._v(" "),_("p",[t._v("通常，HTTP直接和TCP通信。当使用SSL时，则演变成先和SSL通信，再由SSL和TCP通信了。简言之，所谓HTTPS，其实就是身披SSL协议这层外壳的HTTP。")]),t._v(" "),_("p",[t._v("HTTPS协议，它比HTTP协议相比多了以下优势:")]),t._v(" "),_("ul",[_("li",[t._v("数据隐私性：内容经过对称加密，每个连接生成一个唯一的加密密钥")]),t._v(" "),_("li",[t._v("数据完整性：内容传输经过完整性校验")]),t._v(" "),_("li",[t._v("身份认证：第三方无法伪造服务端（客户端）身份")]),t._v(" "),_("li",[t._v("HTTP 的端口号是 80，HTTPS 是 443")]),t._v(" "),_("li",[t._v("HTTPS 需要到 CA 申请证书，一般免费证书很少，需要交费")]),t._v(" "),_("li",[t._v("HTTP 的连接很简单，是明文传输；HTTPS 协议是由 SSL\\TLS+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。")])]),t._v(" "),_("h2",{attrs:{id:"对称加密和非对称加密"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#对称加密和非对称加密"}},[t._v("#")]),t._v(" 对称加密和非对称加密")]),t._v(" "),_("h3",{attrs:{id:"对称加密"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#对称加密"}},[t._v("#")]),t._v(" 对称加密")]),t._v(" "),_("p",[_("strong",[t._v("这种方式加密和解密同用一个密钥")]),t._v("。加密和解密都会用到密钥。没有密钥就无法对密码解密，反过来说，任何人只要持有密钥就能解密了。")]),t._v(" "),_("h3",{attrs:{id:"非对称加密"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#非对称加密"}},[t._v("#")]),t._v(" 非对称加密")]),t._v(" "),_("p",[_("strong",[t._v("公开密钥加密使用一对非对称的密钥")]),t._v("。一把叫做私有密钥，另一把叫做公开密钥。顾名思义，私有密钥不能让其他任何人知道，而公开密钥则可以随意发布，任何人都可以获得。")]),t._v(" "),_("h2",{attrs:{id:"为何不所有的网站都使用https"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#为何不所有的网站都使用https"}},[t._v("#")]),t._v(" 为何不所有的网站都使用HTTPS")]),t._v(" "),_("ol",[_("li",[t._v("HTTPS实施有门槛，这个门槛在于需要权威CA颁发的SSL证书。从证书的选择、购买到部署，传统的模式下都会比较耗时耗力。")]),t._v(" "),_("li",[t._v("HTTPS普遍认为性能消耗要大于HTTP，因为与纯文本通信相比，加密通信会消耗更多的CPU及内存资源。")]),t._v(" "),_("li",[t._v("想要节约购买证书的开销也是原因之一。要进行HTTPS通信，证书是必不可少的。而使用的证书必须向认证机构（CA）购买。")])]),t._v(" "),_("p",[t._v("参考链接")]),t._v(" "),_("ul",[_("li",[_("a",{attrs:{href:"https://juejin.im/post/6844903830916694030",target:"_blank",rel:"noopener noreferrer"}},[t._v("深入理解HTTPS工作原理"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://juejin.im/post/6854573214362779662#heading-19",target:"_blank",rel:"noopener noreferrer"}},[t._v("玩转混合加密 | 精美配图"),_("OutboundLink")],1)]),t._v(" "),_("li",[_("a",{attrs:{href:"https://mp.weixin.qq.com/s/StqqafHePlBkWAPQZg3NrA",target:"_blank",rel:"noopener noreferrer"}},[t._v("一个故事讲完https"),_("OutboundLink")],1),t._v("（加密方式讲的详细）")])])])}),[],!1,null,null,null);v.default=r.exports}}]);