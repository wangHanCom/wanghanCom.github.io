(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{355:function(t,s,n){"use strict";n.r(s);var a=n(42),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"evenloop-事件机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#evenloop-事件机制"}},[t._v("#")]),t._v(" evenloop/事件机制")]),t._v(" "),n("h2",{attrs:{id:"事件循环"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事件循环"}},[t._v("#")]),t._v(" 事件循环")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//直接输出")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//st1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'4'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//p1")]),t._v("\nprocess"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//then1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'7'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//直接输出")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//st2")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'9'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextTick")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'11'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'12'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[t._v("第一轮事件循环流程分析如下：")]),t._v(" "),n("ul",[n("li",[t._v("整体script作为第一个宏任务进入主线程，遇到console.log，输出1。")]),t._v(" "),n("li",[t._v("遇到setTimeout，其回调函数被分发到宏任务Event Queue中。我们暂且记为"),n("code",[t._v("st1")]),t._v("。")]),t._v(" "),n("li",[t._v("遇到process.nextTick()，其回调函数被分发到微任务Event Queue中。我们记为"),n("code",[t._v("p1")]),t._v("。")]),t._v(" "),n("li",[t._v("遇到Promise，new Promise直接执行，输出7。then被分发到微任务Event Queue中。我们记为"),n("code",[t._v("then1")]),t._v("。")]),t._v(" "),n("li",[t._v("又遇到了setTimeout，其回调函数被分发到宏任务Event Queue中，我们记为"),n("code",[t._v("st2")]),t._v("。")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("宏任务Event Queue")]),t._v(" "),n("th",[t._v("微任务Event Queue")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("st1")]),t._v(" "),n("td",[t._v("p1")])]),t._v(" "),n("tr",[n("td",[t._v("st2")]),t._v(" "),n("td",[t._v("then1")])])])]),t._v(" "),n("p",[t._v("我们发现了process1和then1两个微任务。输出6、8")]),t._v(" "),n("p",[t._v("那么第二轮时间循环从"),n("code",[t._v("st1")]),t._v("宏任务开始：")]),t._v(" "),n("p",[t._v("首先输出2。接下来遇到了process.nextTick()，同样将其分发到微任务Event Queue中，记为process2。new Promise立即执行输出4，then也分发到微任务Event Queue中，记为then2。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("宏任务Event Queue")]),t._v(" "),n("th",[t._v("微任务Event Queue")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("st2")]),t._v(" "),n("td",[t._v("p1")])])])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[t._v("| then1\n")])])]),n("p",[t._v("以此类推  最终输出1，7，6，8，2，4，3，5，9，11，10，12。")]),t._v(" "),n("p",[t._v("宏任务=》微任务=》渲染")]),t._v(" "),n("p",[t._v("参考链接")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/59e85eebf265da430d571f89",target:"_blank",rel:"noopener noreferrer"}},[t._v("这一次，彻底弄懂 JavaScript 执行机制"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.im/post/5e22b391f265da3e204d8c14",target:"_blank",rel:"noopener noreferrer"}},[t._v("「硬核JS」一次搞懂JS运行机制（精华！！）"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"进程、线程、浏览器机制与事件循环的关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进程、线程、浏览器机制与事件循环的关系"}},[t._v("#")]),t._v(" 进程、线程、浏览器机制与事件循环的关系")]),t._v(" "),n("h3",{attrs:{id:"进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进程"}},[t._v("#")]),t._v(" 进程")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("进程是CPU资源分配的最小单位")]),t._v("。一个可以独立运行且拥有自己的资源空间的任务程序。进程包括运行中的程序和程序所使用到的内存和系统资源。")]),t._v(" "),n("li",[t._v("每个进程之间是相互独立的，CPU在运行一个进程时，其他的进程处于非运行状态，CPU使用 时间片轮转调度算法 来实现同时运行多个进程。")])]),t._v(" "),n("h3",{attrs:{id:"线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#线程"}},[t._v("#")]),t._v(" 线程")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("线程是CPU调度的最小单位")])]),t._v(" "),n("li",[t._v("线程是建立在进程的基础上的一次程序运行单位，就是程序中的一个执行流，一个进程可以有多个线程。")]),t._v(" "),n("li",[t._v("一个进程中只有一个执行流称作单线程，一个进程中有多个执行流称作多线程。")])]),t._v(" "),n("h3",{attrs:{id:"进程和线程的区别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#进程和线程的区别"}},[t._v("#")]),t._v(" 进程和线程的区别")]),t._v(" "),n("ul",[n("li",[t._v("进程是操作系统分配资源的最小单位，线程是程序执行的最小单位。")]),t._v(" "),n("li",[t._v("一个进程由一个或多个线程组成，线程可以理解为是一个进程中代码的不同执行路线。")]),t._v(" "),n("li",[t._v("进程之间相互独立，但同一进程下的各个线程间共享程序的内存空间(包括代码段、数据集、堆等)及一些进程级的资源(如打开文件和信号)。")]),t._v(" "),n("li",[t._v("调度和切换：线程上下文切换比进程上下文切换要快得多。")])]),t._v(" "),n("h3",{attrs:{id:"多进程和多线程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#多进程和多线程"}},[t._v("#")]),t._v(" 多进程和多线程")]),t._v(" "),n("ul",[n("li",[t._v("多进程：多进程指的是在同一个时间里，同一个计算机系统中如果允许两个或两个以上的进程处于运行状态。")]),t._v(" "),n("li",[t._v("多线程：多线程是指程序中包含多个执行流，即在一个程序中可以同时运行多个不同的线程来执行不同的任务，也就是说允许单个程序创建多个并行执行的线程来完成各自的任务。")])]),t._v(" "),n("h3",{attrs:{id:"浏览器机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器机制"}},[t._v("#")]),t._v(" 浏览器机制")]),t._v(" "),n("p",[t._v("浏览器是多进程的")]),t._v(" "),n("h4",{attrs:{id:"浏览器包含哪些进程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#浏览器包含哪些进程"}},[t._v("#")]),t._v(" 浏览器包含哪些进程")]),t._v(" "),n("p",[t._v("Browser进程")]),t._v(" "),n("ul",[n("li",[t._v("浏览器的主进程(负责协调、主控)，该进程只有一个")]),t._v(" "),n("li",[t._v("负责浏览器界面显示，与用户交互。如前进，后退等")]),t._v(" "),n("li",[t._v("负责各个页面的管理，创建和销毁其他进程")]),t._v(" "),n("li",[t._v("将渲染(Renderer)进程得到的内存中的Bitmap(位图)，绘制到用户界面上")]),t._v(" "),n("li",[t._v("网络资源的管理，下载等")])]),t._v(" "),n("p",[t._v("第三方插件进程")]),t._v(" "),n("ul",[n("li",[t._v("每种类型的插件对应一个进程，当使用该插件时才创建")])]),t._v(" "),n("p",[t._v("GPU进程")]),t._v(" "),n("ul",[n("li",[t._v("该进程也只有一个，用于3D绘制等等")])]),t._v(" "),n("p",[t._v("渲染进程(重)")]),t._v(" "),n("ul",[n("li",[t._v("即通常所说的浏览器内核(Renderer进程，内部是多线程)")]),t._v(" "),n("li",[t._v("每个Tab页面都有一个渲染进程，互不影响")]),t._v(" "),n("li",[t._v("主要作用为页面渲染，脚本执行，事件处理等")])]),t._v(" "),n("p",[t._v("渲染进程Renderer的主要线程\nGUI渲染线程")]),t._v(" "),n("ul",[n("li",[t._v("负责渲染浏览器界面，解析html，css构建DOM树和RenderObject树")]),t._v(" "),n("li",[t._v("修改颜色等，页面会重绘")]),t._v(" "),n("li",[t._v("修改尺寸引起回流")]),t._v(" "),n("li",[t._v("当页面需要重绘和回流时GUI线程执行，绘制页面")]),t._v(" "),n("li",[t._v("GUI渲染线程与JS引擎线程是互斥的，js引擎执行时GUI线程会被挂起，等到空闲时被立即执行")])]),t._v(" "),n("p",[t._v("JS引擎线程")]),t._v(" "),n("ul",[n("li",[t._v("js引擎线程就是js内核，负责处理js脚本（例如v8引擎）")]),t._v(" "),n("li",[t._v("js引擎线程负责解析js脚本，运行代码")]),t._v(" "),n("li",[t._v("js引擎一直等待着任务队列中任务的到来，然后加以处理")])]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("浏览器同时只能有一个JS引擎线程在运行JS程序，所以js是单线程运行的")]),t._v(" "),n("li",[t._v("一个Tab页(renderer进程)中无论什么时候都只有一个JS线程在运行JS程序")])])]),t._v(" "),n("ul",[n("li",[t._v("GUI渲染线程与js线程是互斥的，js引擎线程会阻塞GUI渲染线程")])]),t._v(" "),n("blockquote",[n("ul",[n("li",[t._v("就是我们常遇到的JS执行时间过长，造成页面的渲染不连贯，导致页面渲染加载阻塞(就是加载慢)")]),t._v(" "),n("li",[t._v("例如浏览器渲染的时候遇到"),n("code",[t._v("<script>")]),t._v("标签，就会停止GUI的渲染，然后js引擎线程开始工作，执行里面的js代码，等js执行完毕，js引擎线程停止工作，GUI继续渲染下面的内容。所以如果js执行时间太长就会造成页面卡顿的情况")])])]),t._v(" "),n("p",[t._v("事件触发线程")]),t._v(" "),n("ul",[n("li",[t._v("属于浏览器而不是JS引擎，用来控制事件循环，并且管理着一个事件队列(task queue)")]),t._v(" "),n("li",[t._v("当js执行碰到事件绑定和一些异步操作(如setTimeOut，也可来自浏览器内核的其他线程，如鼠标点击、AJAX异步请求等)，会走事件触发线程将对应的事件添加到对应的线程中(比如定时器操作，便把定时器事件添加到定时器线程)，等异步事件有了结果，便把他们的回调操作添加到事件队列，等待js引擎线程空闲时来处理。")]),t._v(" "),n("li",[t._v("当对应的事件符合触发条件被触发时，该线程会把事件添加到待处理队列的队尾，等待JS引擎的处理")]),t._v(" "),n("li",[t._v("因为JS是单线程，所以这些待处理队列中的事件都得排队等待JS引擎处理")])]),t._v(" "),n("p",[t._v("定时触发器线程")]),t._v(" "),n("ul",[n("li",[t._v("setInterval与setTimeout所在线程")]),t._v(" "),n("li",[t._v("浏览器定时计数器并不是由JavaScript引擎计数的(因为JavaScript引擎是单线程的，如果处于阻塞线程状态就会影响记计时的准确)")]),t._v(" "),n("li",[t._v("通过==单独线程来计时并触发定时==(计时完毕后，添加到==事件触发线程的事件队列==中，等待JS引擎空闲后执行)，这个线程就是==定时触发器线程==，也叫定时器线程")]),t._v(" "),n("li",[t._v("W3C在HTML标准中规定，规定要求setTimeout中低于4ms的时间间隔算为4ms")])]),t._v(" "),n("p",[t._v("异步http请求线程")]),t._v(" "),n("ul",[n("li",[t._v("XMLHttpRequest在连接后是通过浏览器新开一个线程请求")]),t._v(" "),n("li",[t._v("当执行到一个http异步请求时，就把==异步请求事件==添加到==异步请求线程==，等收到响应(准确来说应该是http状态变化)，再把==回调函数==添加到==事件队列==，==等待js引擎线程来执行==")])]),t._v(" "),n("p",[t._v("参考链接")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.im/post/5e22b391f265da3e204d8c14",target:"_blank",rel:"noopener noreferrer"}},[t._v("「硬核JS」一次搞懂JS运行机制（精华！！）"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"实现一个事件的发布订阅"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现一个事件的发布订阅"}},[t._v("#")]),t._v(" 实现一个事件的发布订阅")])])}),[],!1,null,null,null);s.default=e.exports}}]);