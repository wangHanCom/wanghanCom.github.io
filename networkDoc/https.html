<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Https | 汪涵的博客</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.98136e72.css" as="style"><link rel="preload" href="/assets/js/app.df490d21.js" as="script"><link rel="preload" href="/assets/js/2.9235f093.js" as="script"><link rel="preload" href="/assets/js/20.48e0bcc4.js" as="script"><link rel="prefetch" href="/assets/js/10.92f448a7.js"><link rel="prefetch" href="/assets/js/11.d81451ab.js"><link rel="prefetch" href="/assets/js/12.fe657e2d.js"><link rel="prefetch" href="/assets/js/13.673f55af.js"><link rel="prefetch" href="/assets/js/14.33419792.js"><link rel="prefetch" href="/assets/js/15.ab408685.js"><link rel="prefetch" href="/assets/js/16.41231623.js"><link rel="prefetch" href="/assets/js/17.f98cb10c.js"><link rel="prefetch" href="/assets/js/18.dc28497a.js"><link rel="prefetch" href="/assets/js/19.3bd23e42.js"><link rel="prefetch" href="/assets/js/21.4ca137be.js"><link rel="prefetch" href="/assets/js/22.fe35d04c.js"><link rel="prefetch" href="/assets/js/23.e2151993.js"><link rel="prefetch" href="/assets/js/24.42cdd1be.js"><link rel="prefetch" href="/assets/js/25.2ef590fe.js"><link rel="prefetch" href="/assets/js/26.88fd7535.js"><link rel="prefetch" href="/assets/js/27.aefa961a.js"><link rel="prefetch" href="/assets/js/28.5b4073a9.js"><link rel="prefetch" href="/assets/js/29.4c27b4b2.js"><link rel="prefetch" href="/assets/js/3.74014b60.js"><link rel="prefetch" href="/assets/js/30.f97becd7.js"><link rel="prefetch" href="/assets/js/31.92fc7f70.js"><link rel="prefetch" href="/assets/js/32.d7c4f275.js"><link rel="prefetch" href="/assets/js/33.8d2027ca.js"><link rel="prefetch" href="/assets/js/34.adb9aee5.js"><link rel="prefetch" href="/assets/js/35.34cb4c23.js"><link rel="prefetch" href="/assets/js/4.ddf5fb83.js"><link rel="prefetch" href="/assets/js/5.2f6ceb2d.js"><link rel="prefetch" href="/assets/js/6.acebe267.js"><link rel="prefetch" href="/assets/js/7.4f5a488b.js"><link rel="prefetch" href="/assets/js/8.d3b85309.js"><link rel="prefetch" href="/assets/js/9.395837cf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.98136e72.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">汪涵的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/networkDoc/" aria-current="page" class="sidebar-link">计算机网络</a></li><li><a href="/networkDoc/browserCache.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/networkDoc/dns.html" class="sidebar-link">DNS</a></li><li><a href="/networkDoc/http.html" class="sidebar-link">http协议</a></li><li><a href="/networkDoc/https.html" aria-current="page" class="active sidebar-link">Https</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/networkDoc/https.html#https的工作原理" class="sidebar-link">https的工作原理</a></li><li class="sidebar-sub-header"><a href="/networkDoc/https.html#https和http有什么区别" class="sidebar-link">https和http有什么区别</a></li><li class="sidebar-sub-header"><a href="/networkDoc/https.html#对称加密和非对称加密" class="sidebar-link">对称加密和非对称加密</a></li><li class="sidebar-sub-header"><a href="/networkDoc/https.html#为何不所有的网站都使用https" class="sidebar-link">为何不所有的网站都使用HTTPS</a></li></ul></li><li><a href="/networkDoc/iframe.html" class="sidebar-link">iframe</a></li><li><a href="/networkDoc/origin.html" class="sidebar-link">跨域</a></li><li><a href="/networkDoc/tcp.html" class="sidebar-link">TCP</a></li><li><a href="/networkDoc/urlDesc.html" class="sidebar-link">输入一个url发生了什么</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="https"><a href="#https" class="header-anchor">#</a> Https</h1> <h2 id="https的工作原理"><a href="#https的工作原理" class="header-anchor">#</a> https的工作原理</h2> <p>HTTPS 协议的主要功能基本都依赖于 TLS/SSL 协议，TLS/SSL 的功能实现主要依赖于三类基本算法：==散列函数 、对称加密和非对称加密==，其利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。==HTTPS在传输过程中，对内容使用对称加密，而密钥使用非对称加密。==</p> <h3 id="https的工作流程"><a href="#https的工作流程" class="header-anchor">#</a> https的工作流程</h3> <ol><li>Client发起一个HTTPS（比如https://juejin.im/user/4283353031252967）的请求，根据RFC2818的规定，Client知道需要连接Server的443（默认）端口。</li> <li>==Server==把事先配置好的==公钥证书==（public key certificate）返回给客户端。</li> <li>Client验证公钥证书：比如是否在有效期内，证书的用途是不是匹配Client请求的站点，是不是在CRL吊销列表里面，它的上一级证书是否有效，这是一个递归的过程，直到验证到根证书（操作系统内置的Root证书或者Client内置的Root证书）。如果验证通过则继续，不通过则显示警告信息。</li> <li>Client使用伪随机数生成器==生成加密所使用的对称密钥==，然后==用证书的公钥加密这个对称密钥==，发给Server。</li> <li>Server使用自己的==私钥（private key）解密==这个消息，得到对称密钥。至此，Client和Server==双方都持有了相同的对称密钥==。</li> <li>Server==使用对称密钥加密==“明文内容A”，发送给Client。</li> <li>Client==使用对称密钥解密==响应的密文，得到“明文内容A”。</li> <li>Client再次发起HTTPS的请求，使用对称密钥加密请求的“明文内容B”，然后Server使用对称密钥解密密文，得到“明文内容B”。（重复6、7步骤）</li></ol> <p>补充：</p> <ul><li>客户端向服务端发起HTTPS请求</li> <li>服务端返回HTTPS证书</li> <li>客户端验证证书是否合法，不合法会提示告警</li> <li>证书验证合法后，在本地生成随机数</li> <li>用公钥加密随机数并发送到服务端</li> <li>服务端使用私钥对随机数解密</li> <li>服务端使用随机数构造对称加密算法，对内容加密后传输</li> <li>客户端收到加密内容，使用本地存储的随机数构建对称加密算法进行解密</li></ul> <h2 id="https和http有什么区别"><a href="#https和http有什么区别" class="header-anchor">#</a> https和http有什么区别</h2> <p>通常，HTTP直接和TCP通信。当使用SSL时，则演变成先和SSL通信，再由SSL和TCP通信了。简言之，所谓HTTPS，其实就是身披SSL协议这层外壳的HTTP。</p> <p>HTTPS协议，它比HTTP协议相比多了以下优势:</p> <ul><li>数据隐私性：内容经过对称加密，每个连接生成一个唯一的加密密钥</li> <li>数据完整性：内容传输经过完整性校验</li> <li>身份认证：第三方无法伪造服务端（客户端）身份</li> <li>HTTP 的端口号是 80，HTTPS 是 443</li> <li>HTTPS 需要到 CA 申请证书，一般免费证书很少，需要交费</li> <li>HTTP 的连接很简单，是明文传输；HTTPS 协议是由 SSL\TLS+HTTP 协议构建的可进行加密传输、身份认证的网络协议，比 HTTP 协议安全。</li></ul> <h2 id="对称加密和非对称加密"><a href="#对称加密和非对称加密" class="header-anchor">#</a> 对称加密和非对称加密</h2> <h3 id="对称加密"><a href="#对称加密" class="header-anchor">#</a> 对称加密</h3> <p><strong>这种方式加密和解密同用一个密钥</strong>。加密和解密都会用到密钥。没有密钥就无法对密码解密，反过来说，任何人只要持有密钥就能解密了。</p> <h3 id="非对称加密"><a href="#非对称加密" class="header-anchor">#</a> 非对称加密</h3> <p><strong>公开密钥加密使用一对非对称的密钥</strong>。一把叫做私有密钥，另一把叫做公开密钥。顾名思义，私有密钥不能让其他任何人知道，而公开密钥则可以随意发布，任何人都可以获得。</p> <h2 id="为何不所有的网站都使用https"><a href="#为何不所有的网站都使用https" class="header-anchor">#</a> 为何不所有的网站都使用HTTPS</h2> <ol><li>HTTPS实施有门槛，这个门槛在于需要权威CA颁发的SSL证书。从证书的选择、购买到部署，传统的模式下都会比较耗时耗力。</li> <li>HTTPS普遍认为性能消耗要大于HTTP，因为与纯文本通信相比，加密通信会消耗更多的CPU及内存资源。</li> <li>想要节约购买证书的开销也是原因之一。要进行HTTPS通信，证书是必不可少的。而使用的证书必须向认证机构（CA）购买。</li></ol> <p>参考链接</p> <ul><li><a href="https://juejin.im/post/6844903830916694030" target="_blank" rel="noopener noreferrer">深入理解HTTPS工作原理<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/6854573214362779662#heading-19" target="_blank" rel="noopener noreferrer">玩转混合加密 | 精美配图<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://mp.weixin.qq.com/s/StqqafHePlBkWAPQZg3NrA" target="_blank" rel="noopener noreferrer">一个故事讲完https<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>（加密方式讲的详细）</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/networkDoc/http.html" class="prev">
        http协议
      </a></span> <span class="next"><a href="/networkDoc/iframe.html">
        iframe
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.df490d21.js" defer></script><script src="/assets/js/2.9235f093.js" defer></script><script src="/assets/js/20.48e0bcc4.js" defer></script>
  </body>
</html>
